{"ast":null,"code":"import _asyncToGenerator from\"/Users/ilan/dev/react-around-auth/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/ilan/dev/react-around-auth/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/ilan/dev/react-around-auth/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _regeneratorRuntime from\"/Users/ilan/dev/react-around-auth/node_modules/@babel/runtime/regenerator/index.js\";var Api=/*#__PURE__*/function(){function Api(options){_classCallCheck(this,Api);this._url=options.baseUrl;this._token=options.token;this._headers={authorization:this._token,'Content-type':'application/json'};}_createClass(Api,[{key:\"_checkResponse\",value:function _checkResponse(response){if(response.ok){return response.json();}else{console.log('Something went wrong',response.status,response.statusText);}}},{key:\"getInitialCards\",value:function(){var _getInitialCards=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"\".concat(this._url,\"/cards\"),{headers:this._headers});case 2:response=_context.sent;return _context.abrupt(\"return\",this._checkResponse(response));case 4:case\"end\":return _context.stop();}}},_callee,this);}));function getInitialCards(){return _getInitialCards.apply(this,arguments);}return getInitialCards;}()},{key:\"getUserInfo\",value:function(){var _getUserInfo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"\".concat(this._url,\"/users/me\"),{headers:this._headers});case 2:response=_context2.sent;return _context2.abrupt(\"return\",this._checkResponse(response));case 4:case\"end\":return _context2.stop();}}},_callee2,this);}));function getUserInfo(){return _getUserInfo.apply(this,arguments);}return getUserInfo;}()},{key:\"editUserInfo\",value:function(){var _editUserInfo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(name,about){var response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch(\"\".concat(this._url,\"/users/me\"),{method:'PATCH',headers:this._headers,body:JSON.stringify({name:name,about:about})});case 2:response=_context3.sent;return _context3.abrupt(\"return\",this._checkResponse(response));case 4:case\"end\":return _context3.stop();}}},_callee3,this);}));function editUserInfo(_x,_x2){return _editUserInfo.apply(this,arguments);}return editUserInfo;}()},{key:\"uploadUserCard\",value:function(){var _uploadUserCard=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(name,link){var response;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return fetch(\"\".concat(this._url,\"/cards\"),{method:'POST',headers:this._headers,body:JSON.stringify({name:name,link:link})});case 2:response=_context4.sent;return _context4.abrupt(\"return\",this._checkResponse(response));case 4:case\"end\":return _context4.stop();}}},_callee4,this);}));function uploadUserCard(_x3,_x4){return _uploadUserCard.apply(this,arguments);}return uploadUserCard;}()},{key:\"deleteCard\",value:function(){var _deleteCard=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(cardId){var response;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return fetch(\"\".concat(this._url,\"/cards/\").concat(cardId),{method:'DELETE',headers:this._headers});case 2:response=_context5.sent;return _context5.abrupt(\"return\",this._checkResponse(response));case 4:case\"end\":return _context5.stop();}}},_callee5,this);}));function deleteCard(_x5){return _deleteCard.apply(this,arguments);}return deleteCard;}()},{key:\"like\",value:function(){var _like=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(cardId){var response;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return fetch(\"\".concat(this._url,\"/cards/likes/\").concat(cardId),{method:'PUT',headers:this._headers});case 2:response=_context6.sent;return _context6.abrupt(\"return\",this._checkResponse(response));case 4:case\"end\":return _context6.stop();}}},_callee6,this);}));function like(_x6){return _like.apply(this,arguments);}return like;}()},{key:\"dislike\",value:function(){var _dislike=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(cardId){var response;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return fetch(\"\".concat(this._url,\"/cards/likes/\").concat(cardId),{method:'DELETE',headers:this._headers});case 2:response=_context7.sent;return _context7.abrupt(\"return\",this._checkResponse(response));case 4:case\"end\":return _context7.stop();}}},_callee7,this);}));function dislike(_x7){return _dislike.apply(this,arguments);}return dislike;}()},{key:\"setUserAvatar\",value:function(){var _setUserAvatar=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(link){var response;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return fetch(\"\".concat(this._url,\"/users/me/avatar\"),{method:'PATCH',headers:this._headers,body:JSON.stringify({avatar:link})});case 2:response=_context8.sent;return _context8.abrupt(\"return\",this._checkResponse(response));case 4:case\"end\":return _context8.stop();}}},_callee8,this);}));function setUserAvatar(_x8){return _setUserAvatar.apply(this,arguments);}return setUserAvatar;}()}]);return Api;}();var api=new Api({baseUrl:'https://around.nomoreparties.co/v1/group-12',token:'10d5550b-e17c-437f-9d04-3dde6b160e5d'});export default api;","map":{"version":3,"sources":["/Users/ilan/dev/react-around-auth/src/utils/api.js"],"names":["Api","options","_url","baseUrl","_token","token","_headers","authorization","response","ok","json","console","log","status","statusText","fetch","headers","_checkResponse","name","about","method","body","JSON","stringify","link","cardId","avatar","api"],"mappings":"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","sourcesContent":["class Api {\n  constructor(options) {\n    this._url = options.baseUrl;\n    this._token = options.token;\n    this._headers = {\n      authorization: this._token,\n      'Content-type': 'application/json',\n    };\n  }\n\n  _checkResponse(response) {\n    if (response.ok) {\n      return response.json();\n    } else {\n      console.log('Something went wrong', response.status, response.statusText);\n    }\n  }\n\n  async getInitialCards() {\n    const response = await fetch(`${this._url}/cards`, {\n      headers: this._headers,\n    });\n    return this._checkResponse(response);\n  }\n\n  async getUserInfo() {\n    const response = await fetch(`${this._url}/users/me`, {\n      headers: this._headers,\n    });\n    return this._checkResponse(response);\n  }\n\n  async editUserInfo(name, about) {\n    const response = await fetch(`${this._url}/users/me`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        name: name,\n        about: about,\n      }),\n    });\n    return this._checkResponse(response);\n  }\n\n  async uploadUserCard(name, link) {\n    const response = await fetch(`${this._url}/cards`, {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify({ name: name, link: link }),\n    });\n    return this._checkResponse(response);\n  }\n\n  async deleteCard(cardId) {\n    const response = await fetch(`${this._url}/cards/${cardId}`, {\n      method: 'DELETE',\n      headers: this._headers,\n    });\n    return this._checkResponse(response);\n  }\n\n  async like(cardId) {\n    const response = await fetch(`${this._url}/cards/likes/${cardId}`, {\n      method: 'PUT',\n      headers: this._headers,\n    });\n    return this._checkResponse(response);\n  }\n\n  async dislike(cardId) {\n    const response = await fetch(`${this._url}/cards/likes/${cardId}`, {\n      method: 'DELETE',\n      headers: this._headers,\n    });\n    return this._checkResponse(response);\n  }\n\n  async setUserAvatar(link) {\n    const response = await fetch(`${this._url}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({ avatar: link }),\n    });\n    return this._checkResponse(response);\n  }\n}\n\nconst api = new Api({\n  baseUrl: 'https://around.nomoreparties.co/v1/group-12',\n  token: '10d5550b-e17c-437f-9d04-3dde6b160e5d',\n});\n\nexport default api;\n"]},"metadata":{},"sourceType":"module"}